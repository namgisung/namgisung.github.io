---
layout: base
---

<div class="wiki-container">

  <!-- 사이드바 -->
  <aside class="wiki-sidebar">

    {% assign wiki = page.wiki_name %}

    {% assign pages = site.pages
      | where: "layout", "wiki"
      | where: "wiki_name", wiki
      | sort: "order"
    %}

    <!-- 위키 제목 -->
    <div class="wiki-title">
      {{ page.wiki_title | default: wiki | upcase }} Wiki
    </div>

    <ul class="wiki-list">

      <!-- 1단계 (대분류) -->
      {% assign level1 = pages | where: "parent", wiki %}
      {% for l1 in level1 %}
        {% assign level1_path = wiki | append: "/" | append: l1.title %}
        {% assign level2 = pages | where: "parent", level1_path %}

        <li>
          {% if level2.size > 0 %}
            <!-- 접히는 메뉴 (대분류는 클릭 X) -->
            <details {% if page.parent contains l1.title %}open{% endif %}>
              <summary>{{ l1.title }}</summary>
              <ul>

                <!-- 2단계 -->
                {% for l2 in level2 %}
                  {% assign level2_path = level1_path | append: "/" | append: l2.title %}
                  {% assign level3 = pages | where: "parent", level2_path %}

                  <li>
                    {% if level3.size > 0 %}
                      <!-- 접히는 메뉴 -->
                      <details {% if page.parent contains l2.title %}open{% endif %}>
                        <summary>{{ l2.title }}</summary>
                        <ul>
                          {% for l3 in level3 %}
                            <li>
                              <a href="{{ l3.url | relative_url }}"
                                 {% if page.url == l3.url %}class="active"{% endif %}>
                                {{ l3.title }}
                              </a>
                            </li>
                          {% endfor %}
                        </ul>
                      </details>
                    {% else %}
                      <!-- 일반 링크 -->
                      <a href="{{ l2.url | relative_url }}"
                         {% if page.url == l2.url %}class="active"{% endif %}>
                        {{ l2.title }}
                      </a>
                    {% endif %}
                  </li>

                {% endfor %}
              </ul>
            </details>
          {% else %}
            <!-- 자식 없는 항목만 클릭 가능 -->
            <a href="{{ l1.url | relative_url }}"
               {% if page.url == l1.url %}class="active"{% endif %}>
              {{ l1.title }}
            </a>
          {% endif %}
        </li>
      {% endfor %}

    </ul>
  </aside>

  <!-- 본문 -->
  <main class="wiki-content">
    {{ content }}
  </main>

</div>
