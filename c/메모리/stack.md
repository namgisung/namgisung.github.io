---
layout: wiki
title: 스택(Stack)
wiki_name: c
parent: c/메모리
order: 2
---

## 스택(Stack)

스택(Stack)은 **함수 호출과 함께 자동으로 사용되는 메모리 영역**이다.

주로 다음과 같은 데이터가 저장된다.

* 지역변수(Local variable)
* 매개변수(Parameter)
* 함수 호출 정보

스택 영역에 저장된 데이터는 **함수가 호출될 때 생성되고, 함수가 종료되면 자동으로 사라진다.**

---

### (1) 스택의 특징

스택은 다음과 같은 특징을 가진다.

* **자동 메모리 관리** (프로그래머가 직접 해제하지 않음)
* **속도가 매우 빠름**
* **LIFO 구조** (Last In, First Out)

> LIFO란 마지막에 들어온 데이터가 가장 먼저 나가는 구조를 의미한다.

---

### (2) 함수 호출과 스택

함수가 호출되면 스택에는 해당 함수 전용 공간이 생성된다.
이를 **스택 프레임(Stack Frame)**이라고 한다.

```c
void func() {
    int x = 10;  // 스택에 저장
}
```

* `func()`가 호출되면 `x`가 스택에 생성된다.
* `func()`가 종료되면 `x`는 자동으로 제거된다.

이 때문에 스택에 있는 변수는 **함수 밖에서 사용할 수 없다.**

---

### (3) 스택과 지역변수

```c
int main() {
    int a = 5;   // main 함수의 스택 영역
    func();
    return 0;
}
```

* `a`는 `main` 함수가 실행되는 동안만 존재한다.
* `main` 함수가 종료되면 스택 전체가 제거된다.

이것이 지역변수가 함수 밖에서 접근 불가능한 이유이다.

---

### (4) 스택 사용 시 주의점

* 스택에 너무 큰 데이터를 저장하면 **스택 오버플로우(Stack Overflow)**가 발생할 수 있다.
* 함수 종료 후 스택 변수의 주소를 사용하는 것은 **위험하다**.

```c
int* func() {
    int x = 10;
    return &x;  // ❌ 잘못된 코드
}
```

`x`는 함수 종료와 함께 사라지므로, 해당 주소는 더 이상 유효하지 않다.

---

> 스택은 "편하지만 짧게 쓰는 메모리"이다.
> 오래 유지해야 하는 데이터는 힙(Heap)을 사용해야 한다.
