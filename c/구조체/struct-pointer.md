---
layout: wiki
title: 구조체 포인터
wiki_name: c
parent: c/구조체
order: 4
---

## 구조체 포인터

구조체 포인터란 **구조체 변수의 주소를 저장하는 포인터**이다.
즉, 구조체 자체를 복사해서 다루는 것이 아니라 **구조체가 저장된 메모리 위치를 통해 접근**하는 방식이다.

---

### (1) 구조체 포인터 선언

구조체 포인터는 다음과 같이 선언한다.

```c
struct 구조체이름 *포인터이름;
```

예시:

```c
struct Student *p;
```

* `struct Student` : 구조체 자료형
* `*p` : `Student` 구조체를 가리키는 포인터

---

### (2) 구조체 변수의 주소 저장

구조체 포인터에는 **구조체 변수의 주소**를 저장한다.

```c
struct Student s1;
struct Student *p;

p = &s1;
```

* `&s1` : 구조체 변수 `s1`의 시작 주소
* 구조체 이름은 **구조체의 첫 번째 멤버 주소**를 의미한다

---

### (3) 구조체 포인터로 멤버 접근 (-> 연산자)

구조체 포인터를 통해 멤버에 접근할 때는 **`->` 연산자**를 사용한다.

```c
p->id = 1;
strcpy(p->name, "Kim");
p->avg = 4.5;
```

이 코드는 아래 코드와 완전히 동일하다.

```c
(*p).id = 1;
(*p).avg = 4.5;
```

✔️ 가독성 때문에 `->` 연산자를 사용한다

✔️ `*p.id` ❌ (연산자 우선순위 때문에 오류)

---

### (4) 구조체 포인터를 사용하는 이유

구조체 포인터를 사용하는 이유는 명확하다.

✔️ 구조체 크기가 클 때 **복사 비용 감소**

✔️ 함수에 구조체를 전달할 때 **효율적**

✔️ 동적 메모리 할당과 함께 사용 가능

✔️ 배열, 연결 리스트 같은 자료구조의 기본

---

### (5) 함수에서 구조체 포인터 사용 예시

```c
#include <stdio.h>

struct Point {
    int x;
    int y;
};

void move(struct Point *p) {
    p->x += 10;
    p->y += 20;
}

int main() {
    struct Point pt = {0, 0};
    move(&pt);
    printf("%d %d\n", pt.x, pt.y);
    return 0;
}
```

* 구조체를 **값으로 넘기지 않고**
* **주소로 넘겨서 원본을 직접 수정**

---

### (6) 구조체 변수 vs 구조체 포인터 정리

| 구분    | 구조체 변수 | 구조체 포인터  |
| ----- | ------ | -------- |
| 멤버 접근 | `.`    | `->`     |
| 메모리   | 직접 소유  | 주소만 저장   |
| 함수 전달 | 복사 발생  | 복사 없음    |
| 사용 목적 | 간단한 구조 | 효율·연결 구조 |
