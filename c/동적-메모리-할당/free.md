---
layout: wiki
title: free
wiki_name: c
parent: c/λ™μ -λ©”λ¨λ¦¬-ν• λ‹Ή
order: 4
---

## free

### freeλ€?

`free`λ” **λ™μ  λ©”λ¨λ¦¬ ν• λ‹ΉμΌλ΅ ν™•λ³΄ν• ν™(Heap) λ©”λ¨λ¦¬λ¥Ό ν•΄μ **ν•λ” ν•¨μμ΄λ‹¤.

* `malloc`, `calloc`, `realloc`μΌλ΅ ν• λ‹Ήν• λ©”λ¨λ¦¬λ”

  **μ‚¬μ©μ΄ λλ‚λ©΄ λ°λ“μ‹ freeλ΅ λ°λ‚©ν•΄μ•Ό ν•λ‹¤**
* ν•΄μ ν•μ§€ μ•μΌλ©΄ **λ©”λ¨λ¦¬ λ„μ(memory leak)** λ°μƒ

Cμ–Έμ–΄λ” **μλ™ λ©”λ¨λ¦¬ κ΄€λ¦¬κ°€ μ—†μ**

β†’ κ°λ°μκ°€ μ§μ ‘ μ±…μ„μ§

---

### free κΈ°λ³Έ ν•μ‹

```c
free(ν¬μΈν„°);
```

* μΈμλ΅ μ „λ‹¬ν• ν¬μΈν„°κ°€ κ°€λ¦¬ν‚¤λ” ν™ λ©”λ¨λ¦¬λ¥Ό ν•΄μ 
* λ°ν™κ°’ μ—†μ

---

### free μ‚¬μ© μμ 

```c
#include <stdio.h>
#include <stdlib.h>

int main() {
    int* arr = (int*)malloc(5 * sizeof(int));

    for (int i = 0; i < 5; i++) {
        arr[i] = i * 10;
    }

    free(arr);   // λ©”λ¨λ¦¬ ν•΄μ 
    return 0;
}
```

π“ `arr`μ΄ κ°€λ¦¬ν‚¤λ ν™ λ©”λ¨λ¦¬λ” μ΄μμ²΄μ λ΅ λ°ν™λ¨

---

### free μ΄ν›„ ν¬μΈν„° μƒνƒ (μ¤‘μ” β—)

```c
free(arr);
```

* λ©”λ¨λ¦¬λ” ν•΄μ λμ—μ§€λ§
* `arr` ν¬μΈν„° λ³€μ μμ²΄λ” λ‚¨μ•„ μμ
* **μ“°λ κΈ° μ£Όμ†λ¥Ό κ°€λ¦¬ν‚¤λ” μƒνƒ (λ•κΈ€λ§ ν¬μΈν„°)**

β μ„ν—ν• μ½”λ“

```c
free(arr);
printf("%d", arr[0]); // β μ ‘κ·Όν•λ©΄ μ• λ¨
```

μ•μ „ν• μµκ΄€

```c
free(arr);
arr = NULL;
```

---

### NULL ν¬μΈν„°μ— free μ‚¬μ©

```c
int* p = NULL;
free(p);
```

λ¬Έμ  μ—†μ

μ•„λ¬΄ λ™μ‘λ„ ν•μ§€ μ•μ

β†’ **μ•μ „ν• μ½”λ“**

---

### freeλ” λ‡ λ² νΈμ¶ν•΄μ•Ό ν• κΉ?

```c
int* p = malloc(sizeof(int));
free(p);
```

β” 1λ²λ§

β λ‘ λ² νΈμ¶ν•λ©΄?

```c
free(p);
free(p); // β undefined behavior
```

β†’ ν”„λ΅κ·Έλ¨μ΄ ν„°μ§ μλ„ μμ

---

### freeμ™€ λ°°μ—΄

```c
int* arr = malloc(10 * sizeof(int));
free(arr);
```

λ°°μ—΄μ΄λ“  λ‹¨μΌ λ³€μλ“ 

**mallocμΌλ΅ ν• λ‹Ήν–μΌλ©΄ freeλ” ν• λ²λ§**

---

### freeμ™€ realloc κ΄€κ³„

```c
int* arr = malloc(3 * sizeof(int));
arr = realloc(arr, 5 * sizeof(int));
free(arr);
```

* realloc μ΄ν›„μ—λ” **μƒ ν¬μΈν„°λ§ free**
* κΈ°μ΅΄ λ©”λ¨λ¦¬λ” reallocμ΄ μ•μ•„μ„ μ²λ¦¬

---

### λ©”λ¨λ¦¬ λ„μ μμ‹

```c
void func() {
    int* p = malloc(sizeof(int));
    *p = 10;
    // free μ—†μ β
}
```

ν•¨μ μΆ…λ£λΌλ„ ν™ λ©”λ¨λ¦¬λ” λ‚¨μ•„ μμ

β†’ λ°λ³µλλ©΄ λ©”λ¨λ¦¬ κ³„μ† μƒλ” μ¤‘

---

### free μ”μ•½

* ν™ λ©”λ¨λ¦¬ ν•΄μ  ν•¨μ
* malloc / calloc / reallocκ³Ό ν• μ„ΈνΈ
* free ν›„ μ ‘κ·Ό β
* free ν›„ NULL λ€μ… κ¶μ¥
* ν• λ²λ§ free
